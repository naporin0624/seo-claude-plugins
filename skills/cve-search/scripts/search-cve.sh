#!/bin/bash

# CVE Search - Shell wrapper for NVD API client
# Usage: bash search-cve.sh [options]

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

# Check Node.js version
NODE_VERSION=$(node -v 2>/dev/null | cut -d'v' -f2 | cut -d'.' -f1)

if [ -z "$NODE_VERSION" ]; then
    echo "Error: Node.js is not installed" >&2
    exit 1
fi

if [ "$NODE_VERSION" -lt 18 ]; then
    echo "Error: Node.js 18+ is required (found v$NODE_VERSION)" >&2
    exit 1
fi

# Run the search script
node "$SCRIPT_DIR/search-cve.js" "$@"
