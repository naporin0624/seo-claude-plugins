{"version":3,"file":"index.js","names":["DEFAULT_CONFIG: LighthouseConfig","args: string[]","config: LighthouseConfig","target: string | null","target: string","filepath: string","port: number","resolve","server: ChildProcess","data: Buffer","err: Error","url: string","config: LighthouseConfig","lhr: LHR","failed: FailedAudits","failedAudit: FailedAudit","score: number","name: string","value: number | undefined","formatted: string","status: string","url: string","lhr: LHR","metrics: Metrics","failed: FailedAudits","scores: Scores","serverResult: { kill: () => void } | null"],"sources":["../src/cli.ts","../src/server.ts","../src/runner.ts","../src/reporter.ts","../src/index.ts"],"sourcesContent":["/**\n * CLI argument parsing for Lighthouse Runner\n */\n\nimport type { LighthouseConfig } from './types.js';\n\nconst DEFAULT_CONFIG: LighthouseConfig = {\n  timeout: 60,\n  categories: ['performance', 'seo', 'accessibility', 'best-practices'],\n  port: 9222,\n  servePort: 8765,\n  jsonOutput: false,\n};\n\nexport function parseArgs(args: string[]): { target: string | null; config: LighthouseConfig } {\n  const config: LighthouseConfig = { ...DEFAULT_CONFIG };\n  let target: string | null = null;\n\n  for (const arg of args) {\n    if (arg.startsWith('--')) {\n      const [key, value] = arg.slice(2).split('=');\n      switch (key) {\n        case 'json':\n          config.jsonOutput = true;\n          break;\n        case 'timeout':\n          config.timeout = parseInt(value, 10);\n          break;\n        case 'categories':\n          config.categories = value.split(',').map((c) => c.trim());\n          break;\n        case 'help':\n        case 'h':\n          printHelp();\n          process.exit(0);\n          break;\n      }\n    } else if (!target) {\n      target = arg;\n    }\n  }\n\n  return { target, config };\n}\n\nexport function printHelp(): void {\n  console.log(`\nLighthouse Runner - Performance, SEO, Accessibility audits\n\nUsage:\n  npx tsx src/index.ts <url|file> [options]\n\nOptions:\n  --json                 Output in JSON format\n  --timeout=<seconds>    Timeout in seconds (default: 60)\n  --categories=<list>    Comma-separated categories\n                         (performance,seo,accessibility,best-practices)\n  --help, -h             Show this help\n\nExamples:\n  npx tsx src/index.ts https://example.com\n  npx tsx src/index.ts ./index.html --json\n  npx tsx src/index.ts http://localhost:3000 --categories=performance,seo\n`);\n}\n\nexport function isUrl(target: string): boolean {\n  return target.startsWith('http://') || target.startsWith('https://');\n}\n","/**\n * Local server for file analysis\n */\n\nimport { spawn, type ChildProcess } from 'child_process';\nimport { dirname } from 'path';\nimport { resolve } from 'path';\nimport type { ServerResult } from './types.js';\n\nexport async function startLocalServer(\n  filepath: string,\n  port: number\n): Promise<ServerResult> {\n  const absolutePath = resolve(filepath);\n  const dir = dirname(absolutePath);\n\n  return new Promise((resolve, reject) => {\n    const server: ChildProcess = spawn('npx', ['serve', '-l', port.toString(), dir], {\n      stdio: ['ignore', 'pipe', 'pipe'],\n      shell: process.platform === 'win32',\n    });\n\n    let started = false;\n\n    server.stdout?.on('data', (data: Buffer) => {\n      const output = data.toString();\n      if (output.includes('Accepting connections') || output.includes('Local:')) {\n        started = true;\n        const filename = filepath.split(/[/\\\\]/).pop();\n        resolve({\n          kill: () => server.kill(),\n          url: `http://localhost:${port}/${filename}`,\n        });\n      }\n    });\n\n    server.stderr?.on('data', (data: Buffer) => {\n      if (!started) {\n        console.error(`Server error: ${data.toString()}`);\n      }\n    });\n\n    server.on('error', (err: Error) => {\n      reject(new Error(`Failed to start server: ${err.message}`));\n    });\n\n    // Timeout for server startup\n    setTimeout(() => {\n      if (!started) {\n        server.kill();\n        reject(new Error('Server startup timeout'));\n      }\n    }, 10000);\n  });\n}\n","/**\n * Core Lighthouse runner using Playwright\n */\n\nimport { chromium } from 'playwright';\nimport lighthouse, { type RunnerResult } from 'lighthouse';\nimport type { LighthouseConfig, Metrics, FailedAudits, FailedAudit } from './types.js';\n\ninterface LHR {\n  lighthouseVersion: string;\n  categories: Record<string, { score: number; auditRefs: Array<{ id: string }> }>;\n  audits: Record<string, {\n    id: string;\n    title: string;\n    description: string;\n    score: number | null;\n    numericValue?: number;\n    displayValue?: string;\n  }>;\n}\n\nexport async function runLighthouse(url: string, config: LighthouseConfig): Promise<LHR> {\n  const browser = await chromium.launch({\n    headless: true,\n    args: [\n      '--no-sandbox',\n      '--disable-setuid-sandbox',\n      '--disable-dev-shm-usage',\n      '--disable-gpu',\n      `--remote-debugging-port=${config.port}`,\n    ],\n  });\n\n  try {\n    const result = await lighthouse(url, {\n      port: config.port,\n      output: 'json',\n      logLevel: 'error',\n      onlyCategories: config.categories,\n      formFactor: 'desktop',\n      screenEmulation: {\n        mobile: false,\n        width: 1350,\n        height: 940,\n        deviceScaleFactor: 1,\n        disabled: false,\n      },\n      throttling: {\n        rttMs: 40,\n        throughputKbps: 10 * 1024,\n        cpuSlowdownMultiplier: 1,\n      },\n    }) as RunnerResult;\n\n    return result.lhr as unknown as LHR;\n  } finally {\n    await browser.close();\n  }\n}\n\nexport function extractMetrics(lhr: LHR): Metrics {\n  const audits = lhr.audits;\n\n  return {\n    lcp: audits['largest-contentful-paint']?.numericValue,\n    fid: audits['max-potential-fid']?.numericValue,\n    cls: audits['cumulative-layout-shift']?.numericValue,\n    ttfb: audits['server-response-time']?.numericValue,\n    speedIndex: audits['speed-index']?.numericValue,\n    fcp: audits['first-contentful-paint']?.numericValue,\n    tbt: audits['total-blocking-time']?.numericValue,\n  };\n}\n\nexport function extractFailedAudits(lhr: LHR): FailedAudits {\n  const failed: FailedAudits = {};\n\n  for (const [categoryId, category] of Object.entries(lhr.categories)) {\n    failed[categoryId] = [];\n\n    for (const auditRef of category.auditRefs) {\n      const audit = lhr.audits[auditRef.id];\n      if (audit && audit.score !== null && audit.score < 0.9) {\n        const failedAudit: FailedAudit = {\n          id: audit.id,\n          title: audit.title,\n          description: audit.description,\n          score: audit.score,\n          displayValue: audit.displayValue,\n        };\n        failed[categoryId].push(failedAudit);\n      }\n    }\n\n    // Sort by score (lowest first)\n    failed[categoryId].sort((a, b) => (a.score || 0) - (b.score || 0));\n    // Limit to top 5\n    failed[categoryId] = failed[categoryId].slice(0, 5);\n  }\n\n  return failed;\n}\n","/**\n * Report generation for Lighthouse results\n */\n\nimport type { LighthouseReport, Metrics, FailedAudits, Scores } from './types.js';\n\ninterface LHR {\n  lighthouseVersion: string;\n  categories: Record<string, { score: number }>;\n  audits: Record<string, unknown>;\n}\n\nfunction formatScoreBar(score: number): string {\n  const filled = Math.round(score / 10);\n  const empty = 10 - filled;\n  return '#'.repeat(filled) + '-'.repeat(empty);\n}\n\nfunction formatMetric(name: string, value: number | undefined): string {\n  if (value === undefined) return `${name}: N/A`;\n\n  let formatted: string;\n  let status: string;\n\n  switch (name) {\n    case 'LCP':\n      formatted = `${(value / 1000).toFixed(1)}s`;\n      status = value <= 2500 ? 'GOOD' : value <= 4000 ? 'NEEDS IMPROVEMENT' : 'POOR';\n      break;\n    case 'FID':\n      formatted = `${Math.round(value)}ms`;\n      status = value <= 100 ? 'GOOD' : value <= 300 ? 'NEEDS IMPROVEMENT' : 'POOR';\n      break;\n    case 'CLS':\n      formatted = value.toFixed(3);\n      status = value <= 0.1 ? 'GOOD' : value <= 0.25 ? 'NEEDS IMPROVEMENT' : 'POOR';\n      break;\n    default:\n      formatted = `${Math.round(value)}ms`;\n      status = '';\n  }\n\n  return `${name}: ${formatted}${status ? ` [${status}]` : ''}`;\n}\n\nexport function generateTextReport(\n  url: string,\n  lhr: LHR,\n  metrics: Metrics,\n  failed: FailedAudits\n): string {\n  const scores: Scores = {};\n  for (const [id, category] of Object.entries(lhr.categories)) {\n    scores[id] = Math.round(category.score * 100);\n  }\n\n  let output = `# Lighthouse Report: ${url}\\n\\n`;\n  output += `Analyzed at: ${new Date().toISOString()}\\n\\n`;\n\n  output += `## Scores\\n\\n`;\n  for (const [id, score] of Object.entries(scores)) {\n    const name = id.charAt(0).toUpperCase() + id.slice(1).replace('-', ' ');\n    output += `- ${name.padEnd(15)} ${score.toString().padStart(3)}/100 [${formatScoreBar(score)}]\\n`;\n  }\n\n  output += `\\n## Core Web Vitals\\n\\n`;\n  output += `- ${formatMetric('LCP', metrics.lcp)}\\n`;\n  output += `- ${formatMetric('FID', metrics.fid)}\\n`;\n  output += `- ${formatMetric('CLS', metrics.cls)}\\n`;\n\n  output += `\\n## Additional Metrics\\n\\n`;\n  output += `- TTFB: ${metrics.ttfb ? Math.round(metrics.ttfb) + 'ms' : 'N/A'}\\n`;\n  output += `- Speed Index: ${metrics.speedIndex ? (metrics.speedIndex / 1000).toFixed(1) + 's' : 'N/A'}\\n`;\n  output += `- FCP: ${metrics.fcp ? (metrics.fcp / 1000).toFixed(1) + 's' : 'N/A'}\\n`;\n  output += `- TBT: ${metrics.tbt ? Math.round(metrics.tbt) + 'ms' : 'N/A'}\\n`;\n\n  for (const [categoryId, audits] of Object.entries(failed)) {\n    if (audits.length > 0) {\n      const name = categoryId.charAt(0).toUpperCase() + categoryId.slice(1).replace('-', ' ');\n      output += `\\n## ${name} Issues\\n\\n`;\n      audits.forEach((audit, idx) => {\n        const scorePercent = Math.round((audit.score || 0) * 100);\n        output += `${idx + 1}. **${audit.title}** (${scorePercent}%)\\n`;\n        if (audit.displayValue) {\n          output += `   ${audit.displayValue}\\n`;\n        }\n      });\n    }\n  }\n\n  return output;\n}\n\nexport function generateJsonReport(\n  url: string,\n  lhr: LHR,\n  metrics: Metrics,\n  failed: FailedAudits\n): LighthouseReport {\n  const scores: Scores = {};\n  for (const [id, category] of Object.entries(lhr.categories)) {\n    scores[id] = Math.round(category.score * 100);\n  }\n\n  return {\n    url,\n    timestamp: new Date().toISOString(),\n    lighthouseVersion: lhr.lighthouseVersion,\n    scores,\n    metrics,\n    audits: failed,\n  };\n}\n","#!/usr/bin/env node\n\n/**\n * Lighthouse Runner\n *\n * Performance, SEO, Accessibility audits using Playwright and Lighthouse.\n */\n\nimport { existsSync } from 'fs';\nimport { parseArgs, printHelp, isUrl } from './cli.js';\nimport { startLocalServer } from './server.js';\nimport { runLighthouse, extractMetrics, extractFailedAudits } from './runner.js';\nimport { generateTextReport, generateJsonReport } from './reporter.js';\n\nasync function main(): Promise<void> {\n  const args = process.argv.slice(2);\n\n  if (args.length === 0) {\n    printHelp();\n    process.exit(1);\n  }\n\n  const { target, config } = parseArgs(args);\n\n  if (!target) {\n    console.error('Error: No target URL or file specified');\n    process.exit(1);\n  }\n\n  let url = target;\n  let serverResult: { kill: () => void } | null = null;\n\n  // If it's a local file, start a server\n  if (!isUrl(target)) {\n    if (!existsSync(target)) {\n      console.error(`Error: File not found: ${target}`);\n      process.exit(1);\n    }\n\n    console.error(`Starting local server for ${target}...`);\n    try {\n      const result = await startLocalServer(target, config.servePort);\n      serverResult = result;\n      url = result.url;\n      console.error(`Server started at ${url}`);\n    } catch (err) {\n      console.error(`Error: ${err instanceof Error ? err.message : err}`);\n      process.exit(1);\n    }\n  }\n\n  try {\n    console.error(`Running Lighthouse on ${url}...`);\n    const lhr = await runLighthouse(url, config);\n    const metrics = extractMetrics(lhr);\n    const failed = extractFailedAudits(lhr);\n\n    if (config.jsonOutput) {\n      console.log(JSON.stringify(generateJsonReport(url, lhr, metrics, failed), null, 2));\n    } else {\n      console.log(generateTextReport(url, lhr, metrics, failed));\n    }\n  } catch (err) {\n    console.error(`Error running Lighthouse: ${err instanceof Error ? err.message : err}`);\n    process.exit(1);\n  } finally {\n    if (serverResult) {\n      serverResult.kill();\n    }\n  }\n}\n\nmain();\n"],"mappings":"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"}